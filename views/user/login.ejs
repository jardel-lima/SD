 <!DOCTYPE html>
<html>
<head>
	
</head>
<body>
	<div class='row' id='header'>
		<div class="col-md-12">
			<nav class="navbar navbar-default navbar-static-top" style="background-color:green">
				<a class="navbar-brand" style="color:white" href="#">MedicaMent</a>
			</nav>
		</div>
		
	</div>
		<div ng-app="loginApp" ng-controller="loginCtrl">
			<div class="container">
				<div class="panel panel-primary" style ="width:50%; margin: auto; margin-top: 10%; border-color:green;">
				  <div class="panel-heading" style="background-color:green">Login</div>
				  <div class="panel-body">
				   		 <form>
							  <div class="form-group">
								<label for="email">Email:</label>
								<input type="text" name="email" ng-model="email" class="form-control" required="true">
							  </div>
							  <div class="form-group">
								<label for="password">Password:</label>
								<input type="password" name="password" ng-model="password" class="form-control" required="true">
							  </div>
							  <button type="submit" class="btn btn-default" ng-click= "submit()">Submit</button>
							  <p class="navbar-text navbar-right" style = "padding-right:15px;"><a href="/signup" class="navbar-link">Sign up</a></p>
						</form>
						<br/>
						<div id="alertDiv"class="alert alert-danger invisible" role="alert"><span> {{alert}} </span></div>
					</div>
				</div>
			</div>
		</div>	

	<script>
		
    	//var alert_ = ;
		var alertDiv = document.getElementById("alertDiv");
		
		//
/*
		//console.log("Alert: "+alert_);

		var app = angular.module('loginApp', []);
		
		app.controller('loginCtrl', function($scope,$window) {
			$scope.alert = "John";
			/*if($window.alert_.length!=0){
				//$scope.alert = $window.alert;
				//alertDiv.classList.remove("invisible");
			}*/
				
		/*});*/
		
		var formApp = angular.module("loginApp", []);

		formApp.controller('loginCtrl', function($scope,$http) {
			
			$scope.alert = "";
			$scope.email = "";
			$scope.password = "";

			$scope.submit = function(){
				
				if($scope.email.length == 0 || $scope.password.length == 0)
					return;
				var parameter = JSON.stringify({email:$scope.email, password:$scope.password});
				
				//console.log($scope.usr)
				
				$http.post("/login", parameter).
				success(function(data, status, headers, config) {
					// this callback will be called asynchronously
					// when the response is available
					console.log(data);
					console.log("Login: 0K")
					location.assign("http://localhost:1337/");
				  }).
				  error(function(data, status, headers, config) {
					// called asynchronously if an error occurs
					// or server returns response with an error status.
					$scope.alert = data;
					alertDiv.classList.remove("invisible");
					console.log("Login Error");
					$scope.email = "";
					$scope.password = "";
				  });
			
			}			
         });
	</script>
	
</body>
</html> 